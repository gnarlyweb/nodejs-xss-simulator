<!doctype html>
<html>
 	<head>

		<title>XSS Simulator</title>
		
		<link rel="stylesheet" href="stylesheet.css">

        <script src="/socket.io/socket.io.js"></script>

        <script>
        
        var now = new Date();
        var socket = io();
        
        </script>

        <noscript>

            <b>Sorry, this site can't run without JavaScript.</b>

        </noscript>

    </head>

    <body>
        <h1>XSS Simulator</h1>
        <textarea rows=10 cols=70 id="text-field"></textarea><br><br>
        <input type="checkbox" id="renderAsHTML" value=false><label for="renderAsHTML">Render the below text as HTML (note: any scripts will be executed)!</label>

        <br>

        <p id="tgh"></p><br>

        <p class="xss-info">
            <b>Learn more about XSS vulnerabilities</b><br>
            OWASP: <a href="https://www.owasp.org/index.php/Cross-site_Scripting_(XSS)">https://www.owasp.org/index.php/Cross-site_Scripting_(XSS)</a><br>
            Wikipedia: <a href="https://en.wikipedia.org/wiki/Cross-site_scripting">https://en.wikipedia.org/wiki/Cross-site_scripting</a><br>
            Play Google's XSS game: <a href="https://xss-game.appspot.com/">https://xss-game.appspot.com/</a><br>
        </p>

        <a href="https://github.com/shaunakg/nodejs-xss-simulator" target="_blank" rel="noopener"><span class="bottom-bar">Made with ❤️ by @shaunakg.</span></a>

    </body>

    <script>

    var text_field = document.getElementById("text-field");
    var tgh = document.getElementById('tgh');
    var renderHTML = document.getElementById("renderAsHTML");

    tgh.innerText = "--";

    renderHTML.oninput = function () {
        if (renderHTML.checked) {
            tgh.innerHTML = tgh.innerText;
        } else {
            tgh.innerText = tgh.innerHTML;
        }
    };

    text_field.oninput = function () {
        
        if (renderHTML.checked) {
            tgh.innerHTML = text_field.value;
        } else {
            tgh.innerText = text_field.value;
        }

        socket.emit('ctfc', text_field.value);

    };

    socket.on('stfc', function (new_text) {
        text_field.oninput = undefined;

        if (renderHTML.checked) {
            tgh.innerHTML = new_text;
        } else {
            tgh.innerText = new_text;
        }

        text_field.value = new_text;
        text_field.oninput = function () {
            socket.emit('ctfc', text_field.value);
        };
    });

    </script>

